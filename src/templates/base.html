<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{% block meta_description %}TradeVision - Smart Trading Platform for automated daily profits{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}trading, investment, profits, automated trading, financial platform{% endblock %}">
    <meta name="author" content="TradeVision">
    
    <!-- SEO -->
    <meta property="og:title" content="{% block og_title %}TradeVision - Smart Trading Platform{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Generate daily profits through automated trading packages{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{% block og_url %}{{ request.build_absolute_uri }}{% endblock %}">
    <meta property="og:image" content="{% block og_image %}/static/images/og-image.jpg{% endblock %}">
    
    <title>{% block title %}TradeVision - Smart Trading Platform{% endblock %}</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/images/favicon.ico">
    <link rel="apple-touch-icon" href="/static/images/apple-touch-icon.png">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        },
                        success: {
                            50: '#f0fdf4',
                            100: '#dcfce7',
                            200: '#bbf7d0',
                            300: '#86efac',
                            400: '#4ade80',
                            500: '#22c55e',
                            600: '#16a34a',
                            700: '#15803d',
                            800: '#166534',
                            900: '#14532d',
                        },
                        warning: {
                            50: '#fffbeb',
                            100: '#fef3c7',
                            200: '#fde68a',
                            300: '#fcd34d',
                            400: '#fbbf24',
                            500: '#f59e0b',
                            600: '#d97706',
                            700: '#b45309',
                            800: '#92400e',
                            900: '#78350f',
                        },
                        danger: {
                            50: '#fef2f2',
                            100: '#fee2e2',
                            200: '#fecaca',
                            300: '#fca5a5',
                            400: '#f87171',
                            500: '#ef4444',
                            600: '#dc2626',
                            700: '#b91c1c',
                            800: '#991b1b',
                            900: '#7f1d1d',
                        },
                        dark: {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                        }
                    },
                    fontFamily: {
                        'sans': ['Inter', 'ui-sans-serif', 'system-ui'],
                        'heading': ['Poppins', 'ui-sans-serif', 'system-ui'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'bounce-in': 'bounceIn 0.6s ease-out',
                        'pulse-slow': 'pulse 3s infinite',
                        'spin-slow': 'spin 3s linear infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        bounceIn: {
                            '0%': { transform: 'scale(0.3)', opacity: '0' },
                            '50%': { transform: 'scale(1.05)' },
                            '70%': { transform: 'scale(0.9)' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        }
                    }
                }
            },
            darkMode: 'class',
        }
    </script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <style>
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        /* Gradient backgrounds */
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .gradient-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        }
        
        .gradient-success {
            background: linear-gradient(135deg, #22c55e 0%, #15803d 100%);
        }
        
        .gradient-warning {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        
        /* Card shadows */
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .card-shadow-lg {
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        /* Loading spinner */
        .spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        
        /* Countdown timer styles */
        .countdown-timer {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            font-variant-numeric: tabular-nums;
        }
        
        /* Trading card hover effects */
        .trading-card {
            transition: all 0.3s ease;
        }
        
        .trading-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        /* Status indicators */
        .status-active {
            background-color: #22c55e;
            animation: pulse 2s infinite;
        }
        
        .status-pending {
            background-color: #f59e0b;
            animation: pulse 2s infinite;
        }
        
        .status-completed {
            background-color: #6b7280;
        }
        
        /* Chart containers */
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        
        /* Mobile optimizations */
        @media (max-width: 640px) {
            .mobile-hidden {
                display: none;
            }
            
            .mobile-full {
                width: 100vw;
                margin-left: calc(-50vw + 50%);
            }
        }
        
        /* Print styles */
        @media print {
            .no-print {
                display: none !important;
            }
        }
        
        /* Dark mode support */
        .dark .bg-white {
            background-color: #1e293b;
        }
        
        .dark .text-gray-900 {
            color: #f1f5f9;
        }
        
        .dark .border-gray-200 {
            border-color: #334155;
        }
    </style>
    
    {% block extra_css %}{% endblock %}
</head>
<body class="h-full bg-gray-50 font-sans antialiased">
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-white bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="text-center">
            <div class="spinner mx-auto mb-4"></div>
            <p class="text-gray-600">Loading...</p>
        </div>
    </div>
    
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-40 border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <!-- Logo and Brand -->
                <div class="flex items-center">
                    <a href="{% url 'core:home' %}" class="flex items-center space-x-3 group">
                        <div class="w-10 h-10 bg-gradient-primary rounded-lg flex items-center justify-center group-hover:scale-105 transition-transform duration-200">
                            <i class="fas fa-chart-line text-white text-lg"></i>
                        </div>
                        <span class="text-xl font-bold font-heading text-gray-900 group-hover:text-primary-600 transition-colors duration-200">TradeVision</span>
                    </a>
                </div>
                
                <!-- Desktop Navigation -->
                <div class="hidden md:flex items-center space-x-1">
                    {% if user.is_authenticated %}
                        <!-- Dashboard Navigation -->
                        <a href="{% url 'trading:dashboard' %}" class="nav-link px-4 py-2 rounded-lg text-sm font-medium text-gray-700 hover:text-primary-600 hover:bg-primary-50 transition-all duration-200">
                            <i class="fas fa-tachometer-alt mr-2"></i>Dashboard
                        </a>
                        <a href="{% url 'trading:packages' %}" class="nav-link px-4 py-2 rounded-lg text-sm font-medium text-gray-700 hover:text-primary-600 hover:bg-primary-50 transition-all duration-200">
                            <i class="fas fa-box mr-2"></i>Packages
                        </a>
                        <a href="{% url 'payments:deposit' %}" class="nav-link px-4 py-2 rounded-lg text-sm font-medium text-gray-700 hover:text-success-600 hover:bg-success-50 transition-all duration-200">
                            <i class="fas fa-plus-circle mr-2"></i>Deposit
                        </a>
                        <a href="{% url 'payments:withdraw' %}" class="nav-link px-4 py-2 rounded-lg text-sm font-medium text-gray-700 hover:text-warning-600 hover:bg-warning-50 transition-all duration-200">
                            <i class="fas fa-minus-circle mr-2"></i>Withdraw
                        </a>
                        
                        <!-- Wallet Balance (Desktop) -->
                        {% if user.wallet %}
                        <div class="px-3 py-2 bg-gray-100 rounded-lg ml-2">
                            <div class="text-xs text-gray-500">Balance</div>
                            <div class="text-sm font-semibold text-gray-900">
                                {{ user.wallet.balance|floatformat:2 }} {{ user.wallet.currency }}
                            </div>
                        </div>
                        {% endif %}
                        
                        <!-- User Dropdown -->
                        <div class="relative ml-3" x-data="{ open: false }">
                            <button @click="open = !open" class="flex items-center space-x-2 text-gray-700 hover:text-primary-600 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200">
                                {% if user.profile.avatar %}
                                    <img src="{{ user.profile.avatar.url }}" alt="Avatar" class="w-8 h-8 rounded-full">
                                {% else %}
                                    <div class="w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center">
                                        <i class="fas fa-user text-primary-600 text-sm"></i>
                                    </div>
                                {% endif %}
                                <span class="hidden lg:block">{{ user.full_name|default:user.email|truncatechars:15 }}</span>
                                <i class="fas fa-chevron-down text-xs transition-transform duration-200" :class="{ 'rotate-180': open }"></i>
                            </button>
                            
                            <!-- Dropdown Menu -->
                            <div x-show="open" 
                                 @click.away="open = false" 
                                 x-transition:enter="transition ease-out duration-200"
                                 x-transition:enter-start="opacity-0 scale-95"
                                 x-transition:enter-end="opacity-100 scale-100"
                                 x-transition:leave="transition ease-in duration-150"
                                 x-transition:leave-start="opacity-100 scale-100"
                                 x-transition:leave-end="opacity-0 scale-95"
                                 class="absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg py-1 z-50 border border-gray-200">
                                
                                <!-- User Info -->
                                <div class="px-4 py-3 border-b border-gray-100">
                                    <p class="text-sm font-medium text-gray-900">{{ user.full_name|default:"User" }}</p>
                                    <p class="text-sm text-gray-500">{{ user.email }}</p>
                                </div>
                                
                                <!-- Menu Items -->
                                <a href="{% url 'accounts:profile' %}" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200">
                                    <i class="fas fa-user mr-3 text-gray-400"></i>Profile
                                </a>
                                <a href="{% url 'accounts:security' %}" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200">
                                    <i class="fas fa-shield-alt mr-3 text-gray-400"></i>Security
                                </a>
                                <a href="{% url 'accounts:referrals' %}" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200">
                                    <i class="fas fa-users mr-3 text-gray-400"></i>Referrals
                                </a>
                                <a href="{% url 'payments:transactions' %}" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200">
                                    <i class="fas fa-history mr-3 text-gray-400"></i>Transactions
                                </a>
                                <a href="{% url 'core:support_tickets' %}" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200">
                                    <i class="fas fa-life-ring mr-3 text-gray-400"></i>Support
                                </a>
                                
                                <div class="border-t border-gray-100 mt-1 pt-1">
                                    <a href="{% url 'account_logout' %}" class="flex items-center px-4 py-2 text-sm text-danger-600 hover:bg-danger-50 transition-colors duration-200">
                                        <i class="fas fa-sign-out-alt mr-3"></i>Logout
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <!-- Guest Navigation -->
                        <a href="{% url 'core:about' %}" class="nav-link px-4 py-2 rounded-lg text-sm font-medium text-gray-700 hover:text-primary-600 hover:bg-primary-50 transition-all duration-200">About</a>
                        <a href="{% url 'core:faq' %}" class="nav-link px-4 py-2 rounded-lg text-sm font-medium text-gray-700 hover:text-primary-600 hover:bg-primary-50 transition-all duration-200">FAQ</a>
                        <a href="{% url 'account_login' %}" class="nav-link px-4 py-2 rounded-lg text-sm font-medium text-gray-700 hover:text-primary-600 hover:bg-primary-50 transition-all duration-200">Login</a>
                        <a href="{% url 'account_signup' %}" class="bg-gradient-primary text-white px-6 py-2 rounded-lg text-sm font-medium hover:shadow-lg transform hover:scale-105 transition-all duration-200">
                            Get Started
                        </a>
                    {% endif %}
                </div>
                
                <!-- Mobile menu button -->
                <div class="md:hidden flex items-center">
                    <button x-data @click="$dispatch('toggle-mobile-menu')" class="text-gray-700 hover:text-primary-600 p-2 rounded-lg hover:bg-gray-100 transition-all duration-200">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Navigation -->
        <div x-data="{ open: false }" 
             @toggle-mobile-menu.window="open = !open" 
             x-show="open" 
             x-transition:enter="transition ease-out duration-200"
             x-transition:enter-start="opacity-0 -translate-y-1"
             x-transition:enter-end="opacity-100 translate-y-0"
             x-transition:leave="transition ease-in duration-150"
             x-transition:leave-start="opacity-100 translate-y-0"
             x-transition:leave-end="opacity-0 -translate-y-1"
             class="md:hidden bg-white border-t border-gray-200 shadow-lg">
            <div class="px-4 pt-2 pb-3 space-y-1">
                {% if user.is_authenticated %}
                    <!-- Wallet Balance (Mobile) -->
                    {% if user.wallet %}
                    <div class="px-3 py-3 bg-gradient-primary rounded-lg text-white mb-3">
                        <div class="text-sm opacity-90">Your Balance</div>
                        <div class="text-lg font-bold">{{ user.wallet.balance|floatformat:2 }} {{ user.wallet.currency }}</div>
                    </div>
                    {% endif %}
                    
                    <a href="{% url 'trading:dashboard' %}" class="mobile-nav-link block px-3 py-3 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-all duration-200">
                        <i class="fas fa-tachometer-alt mr-3"></i>Dashboard
                    </a>
                    <a href="{% url 'trading:packages' %}" class="mobile-nav-link block px-3 py-3 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-all duration-200">
                        <i class="fas fa-box mr-3"></i>Packages
                    </a>
                    <a href="{% url 'payments:deposit' %}" class="mobile-nav-link block px-3 py-3 text-base font-medium text-gray-700 hover:text-success-600 hover:bg-success-50 rounded-lg transition-all duration-200">
                        <i class="fas fa-plus-circle mr-3"></i>Deposit
                    </a>
                    <a href="{% url 'payments:withdraw' %}" class="mobile-nav-link block px-3 py-3 text-base font-medium text-gray-700 hover:text-warning-600 hover:bg-warning-50 rounded-lg transition-all duration-200">
                        <i class="fas fa-minus-circle mr-3"></i>Withdraw
                    </a>
                    
                    <div class="border-t border-gray-200 mt-3 pt-3">
                        <a href="{% url 'accounts:profile' %}" class="mobile-nav-link block px-3 py-3 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-all duration-200">
                            <i class="fas fa-user mr-3"></i>Profile
                        </a>
                        <a href="{% url 'account_logout' %}" class="mobile-nav-link block px-3 py-3 text-base font-medium text-danger-600 hover:bg-danger-50 rounded-lg transition-all duration-200">
                            <i class="fas fa-sign-out-alt mr-3"></i>Logout
                        </a>
                    </div>
                {% else %}
                    <a href="{% url 'core:about' %}" class="mobile-nav-link block px-3 py-3 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-all duration-200">About</a>
                    <a href="{% url 'core:faq' %}" class="mobile-nav-link block px-3 py-3 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-all duration-200">FAQ</a>
                    <a href="{% url 'account_login' %}" class="mobile-nav-link block px-3 py-3 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-all duration-200">Login</a>
                    <a href="{% url 'account_signup' %}" class="mobile-nav-link block px-3 py-3 text-base font-medium bg-gradient-primary text-white hover:shadow-lg rounded-lg transition-all duration-200">Get Started</a>
                {% endif %}
            </div>
        </div>
    </nav>
    
    <!-- Messages/Notifications -->
    {% if messages %}
        <div class="fixed top-20 right-4 z-50 space-y-2 max-w-sm">
            {% for message in messages %}
                <div x-data="{ show: true }" 
                     x-show="show" 
                     x-transition:enter="transition ease-out duration-300"
                     x-transition:enter-start="opacity-0 transform translate-x-full"
                     x-transition:enter-end="opacity-100 transform translate-x-0"
                     x-transition:leave="transition ease-in duration-200"
                     x-transition:leave-start="opacity-100 transform translate-x-0"
                     x-transition:leave-end="opacity-0 transform translate-x-full"
                     class="bg-white shadow-lg rounded-lg overflow-hidden border-l-4 {% if message.tags == 'success' %}border-success-500{% elif message.tags == 'error' %}border-danger-500{% elif message.tags == 'warning' %}border-warning-500{% else %}border-primary-500{% endif %}">
                    <div class="p-4">
                        <div class="flex items-start">
                            <div class="flex-shrink-0">
                                {% if message.tags == 'success' %}
                                    <i class="fas fa-check-circle text-success-500 text-xl"></i>
                                {% elif message.tags == 'error' %}
                                    <i class="fas fa-exclamation-circle text-danger-500 text-xl"></i>
                                {% elif message.tags == 'warning' %}
                                    <i class="fas fa-exclamation-triangle text-warning-500 text-xl"></i>
                                {% else %}
                                    <i class="fas fa-info-circle text-primary-500 text-xl"></i>
                                {% endif %}
                            </div>
                            <div class="ml-3 w-0 flex-1">
                                <p class="text-sm font-medium text-gray-900">{{ message }}</p>
                            </div>
                            <div class="ml-4 flex-shrink-0 flex">
                                <button @click="show = false" class="text-gray-400 hover:text-gray-600 transition-colors duration-200">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}
    
    <!-- Main Content -->
    <main class="{% if user.is_authenticated %}{% else %}{% endif %}">
        {% block content %}{% endblock %}
    </main>
    
    <!-- Footer -->
    <footer class="bg-dark-900 text-white mt-auto">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- Brand Column -->
                <div class="col-span-1 md:col-span-2">
                    <div class="flex items-center space-x-3 mb-6">
                        <div class="w-12 h-12 bg-gradient-primary rounded-lg flex items-center justify-center">
                            <i class="fas fa-chart-line text-white text-xl"></i>
                        </div>
                        <span class="text-2xl font-bold font-heading">TradeVision</span>
                    </div>
                    <p class="text-gray-300 mb-6 max-w-md">Empowering individuals with sustainable and transparent financial growth opportunities through smart trading solutions.</p>
                    
                    <!-- Social Links -->
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition-colors duration-200 text-lg">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors duration-200 text-lg">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors duration-200 text-lg">
                            <i class="fab fa-telegram"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors duration-200 text-lg">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors duration-200 text-lg">
                            <i class="fab fa-linkedin"></i>
                        </a>
                    </div>
                </div>
                
                <!-- Platform Links -->
                <div>
                    <h3 class="text-sm font-semibold text-gray-400 tracking-wider uppercase mb-4">Platform</h3>
                    <ul class="space-y-3">
                        <li><a href="{% url 'core:about' %}" class="text-gray-300 hover:text-white transition-colors duration-200">About Us</a></li>
                        <li><a href="{% url 'core:faq' %}" class="text-gray-300 hover:text-white transition-colors duration-200">FAQ</a></li>
                        <li><a href="{% url 'trading:packages' %}" class="text-gray-300 hover:text-white transition-colors duration-200">Trading Packages</a></li>
                        <li><a href="{% url 'core:terms' %}" class="text-gray-300 hover:text-white transition-colors duration-200">Terms & Conditions</a></li>
                        <li><a href="{% url 'core:privacy' %}" class="text-gray-300 hover:text-white transition-colors duration-200">Privacy Policy</a></li>
                    </ul>
                </div>
                
                <!-- Support Links -->
                <div>
                    <h3 class="text-sm font-semibold text-gray-400 tracking-wider uppercase mb-4">Support</h3>
                    <ul class="space-y-3">
                        <li class="flex items-center text-gray-300">
                            <i class="fas fa-envelope mr-2 text-primary-500"></i> 
                            <a href="mailto:support@tradevision.com" class="hover:text-white transition-colors duration-200">support@tradevision.com</a>
                        </li>
                        <li class="flex items-center text-gray-300">
                            <i class="fas fa-phone mr-2 text-primary-500"></i> 
                            <a href="tel:+254700000000" class="hover:text-white transition-colors duration-200">+254 700 000 000</a>
                        </li>
                        <li class="flex items-center text-gray-300">
                            <i class="fab fa-telegram mr-2 text-primary-500"></i> 
                            <a href="#" class="hover:text-white transition-colors duration-200">@TradeVisionSupport</a>
                        </li>
                        <li class="flex items-center text-gray-300">
                            <i class="fab fa-whatsapp mr-2 text-primary-500"></i> 
                            <a href="#" class="hover:text-white transition-colors duration-200">+254 700 000 001</a>
                        </li>
                        <li><a href="{% url 'core:contact' %}" class="text-gray-300 hover:text-white transition-colors duration-200">Contact Form</a></li>
                    </ul>
                </div>
            </div>
            
            <!-- Footer Bottom -->
            <div class="mt-8 pt-8 border-t border-gray-800">
                <div class="md:flex md:items-center md:justify-between">
                    <div class="flex space-x-6 md:order-2">
                        <a href="{% url 'core:terms' %}" class="text-gray-400 hover:text-gray-300 text-sm">Terms</a>
                        <a href="{% url 'core:privacy' %}" class="text-gray-400 hover:text-gray-300 text-sm">Privacy</a>
                        <a href="{% url 'core:faq' %}" class="text-gray-400 hover:text-gray-300 text-sm">FAQ</a>
                        <a href="{% url 'core:contact' %}" class="text-gray-400 hover:text-gray-300 text-sm">Support</a>
                    </div>
                    <p class="mt-8 text-base text-gray-400 md:mt-0 md:order-1">
                        &copy; 2025 TradeVision. All rights reserved. 
                        <span class="block sm:inline mt-1 sm:mt-0">Built with ❤️ for financial freedom.</span>
                    </p>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Back to Top Button -->
    <button id="back-to-top" 
            class="fixed bottom-6 right-6 bg-primary-600 text-white p-3 rounded-full shadow-lg hover:bg-primary-700 transition-all duration-300 transform hover:scale-110 hidden z-40">
        <i class="fas fa-arrow-up"></i>
    </button>
    
    <!-- Scripts -->
    
    <!-- Alpine.js -->
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    
    <!-- Chart.js (for trading charts) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Custom JavaScript -->
    <script>
        // Auto-hide messages after 5 seconds
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                const messages = document.querySelectorAll('[x-data*="show: true"]');
                messages.forEach(function(message) {
                    if (message.__x && message.__x.$data) {
                        message.__x.$data.show = false;
                    }
                });
            }, 5000);
        });
        
        // Countdown timer functionality
        function updateCountdowns() {
            const countdowns = document.querySelectorAll('.countdown-timer');
            countdowns.forEach(function(countdown) {
                const endTime = new Date(countdown.dataset.endTime).getTime();
                const now = new Date().getTime();
                const timeLeft = endTime - now;
                
                if (timeLeft > 0) {
                    const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                    
                    countdown.innerHTML = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                } else {
                    countdown.innerHTML = '<span class="text-success-500 font-bold">COMPLETED</span>';
                    countdown.classList.add('text-success-500', 'animate-pulse');
                }
            });
        }
        
        // Update countdowns every second
        if (document.querySelectorAll('.countdown-timer').length > 0) {
            setInterval(updateCountdowns, 1000);
            updateCountdowns(); // Initial call
        }
        
        // Loading overlay functions
        function showLoading() {
            document.getElementById('loading-overlay').classList.remove('hidden');
        }
        
        function hideLoading() {
            document.getElementById('loading-overlay').classList.add('hidden');
        }
        
        // Back to top button
        const backToTopButton = document.getElementById('back-to-top');
        
        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
                backToTopButton.classList.remove('hidden');
            } else {
                backToTopButton.classList.add('hidden');
            }
        });
        
        backToTopButton.addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        
        // Form validation helper
        function validateForm(formId) {
            const form = document.getElementById(formId);
            const inputs = form.querySelectorAll('input[required], select[required], textarea[required]');
            let isValid = true;
            
            inputs.forEach(function(input) {
                if (!input.value.trim()) {
                    input.classList.add('border-danger-500');
                    isValid = false;
                } else {
                    input.classList.remove('border-danger-500');
                }
            });
            
            return isValid;
        }
        
        // Currency formatter
        function formatCurrency(amount, currency = 'KSH') {
            return new Intl.NumberFormat('en-KE', {
                style: 'currency',
                currency: currency,
                minimumFractionDigits: 2
            }).format(amount);
        }
        
        // Number formatter with commas
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
        
        // Copy to clipboard function
        function copyToClipboard(text, successMessage = 'Copied to clipboard!') {
            navigator.clipboard.writeText(text).then(function() {
                // Show success message (you can customize this)
                alert(successMessage);
            }).catch(function() {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert(successMessage);
            });
        }
        
        // AJAX helper function
        function makeAjaxRequest(url, method = 'GET', data = null) {
            return fetch(url, {
                method: method,
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]')?.value
                },
                body: data ? JSON.stringify(data) : null
            }).then(response => response.json());
        }
        
        // Auto-refresh wallet balance (for authenticated users)
        {% if user.is_authenticated %}
        function refreshWalletBalance() {
            makeAjaxRequest('{% url "payments:wallet_balance" %}')
                .then(data => {
                    if (data.success) {
                        // Update wallet balance displays
                        document.querySelectorAll('.wallet-balance').forEach(element => {
                            element.textContent = formatNumber(data.data.available_balance) + ' ' + data.data.currency;
                        });
                    }
                })
                .catch(error => console.log('Error updating wallet balance:', error));
        }
        
        // Refresh wallet balance every 5 minutes
        setInterval(refreshWalletBalance, 300000);
        {% endif %}
        
        // Page visibility API - pause timers when page is hidden
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                // Page is hidden, pause intensive operations
                console.log('Page hidden - pausing timers');
            } else {
                // Page is visible, resume operations
                console.log('Page visible - resuming timers');
                updateCountdowns();
            }
        });
        
        // Performance monitoring
        window.addEventListener('load', function() {
            // Log page load time
            const loadTime = performance.now();
            if (loadTime > 3000) {
                console.warn('Page took longer than 3 seconds to load:', loadTime);
            }
        });
        
        // Error handling for failed requests
        window.addEventListener('error', function(e) {
            console.error('JavaScript error:', e.error);
            // You could send this to a logging service
        });
        
        // Service Worker registration (for PWA features)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker registration failed');
                    });
            });
        }
    </script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>