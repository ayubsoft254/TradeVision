{% extends 'base.html' %}
{% load static %}

{% block title %}Privacy Policy - TradeVision{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="bg-gradient-to-r from-primary-700 via-primary-600 to-primary-500 text-white py-20 shadow-lg">
    <div class="max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8">
        <h1 class="text-5xl font-extrabold font-heading mb-4">Privacy Policy</h1>
        <p class="text-xl text-gray-100">How we collect, use, and protect your information</p>
        <p class="text-sm text-gray-300 mt-3">📅 Last updated: January 2025</p>
    </div>
</section>

<!-- Search Bar -->
<section class="py-6 bg-gray-50 border-b">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <input 
            id="policySearch" 
            type="text" 
            placeholder="🔍 Search privacy policy..." 
            class="w-full p-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500"
        >
    </div>
</section>

<!-- Privacy Content -->
<section class="py-16 bg-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="prose prose-lg max-w-none leading-relaxed">

            <!-- Table of Contents -->
            <div class="bg-gray-50 border border-gray-100 rounded-xl shadow-sm p-8 mb-12">
                <h2 class="text-2xl font-bold text-gray-900 mb-4">📖 Table of Contents</h2>
                <ul class="space-y-3 text-primary-700 font-medium">
                    <li><a href="#information-we-collect" class="hover:underline">1. Information We Collect</a></li>
                    <li><a href="#how-we-use" class="hover:underline">2. How We Use Your Information</a></li>
                    <li><a href="#information-sharing" class="hover:underline">3. Information Sharing</a></li>
                    <li><a href="#data-security" class="hover:underline">4. Data Security</a></li>
                    <li><a href="#data-retention" class="hover:underline">5. Data Retention</a></li>
                    <li><a href="#your-rights" class="hover:underline">6. Your Rights</a></li>
                    <li><a href="#cookies" class="hover:underline">7. Cookies</a></li>
                    <li><a href="#changes" class="hover:underline">8. Policy Updates</a></li>
                    <li><a href="#contact-privacy" class="hover:underline">9. Contact Us</a></li>
                </ul>
            </div>

            <!-- Collapsible Section -->
            <section id="information-we-collect" class="mb-12 collapsible-section">
                <h2 class="section-header cursor-pointer bg-gray-100 px-4 py-3 rounded-lg flex justify-between items-center">
                    <span class="text-2xl font-bold text-gray-900">1. Information We Collect</span>
                    <i class="fas fa-chevron-down text-gray-600"></i>
                </h2>
                <div class="section-content mt-4 hidden">
                    <h3 class="text-xl font-semibold text-gray-800 mb-3">Personal Information</h3>
                    <ul class="list-disc pl-6 space-y-2 text-gray-600">
                        <li>Name, email, and contact information</li>
                        <li>Identity verification documents</li>
                        <li>Financial details (bank accounts, payment methods)</li>
                        <li>Trading history & preferences</li>
                    </ul>
                </div>
            </section>

            <!-- Repeat collapsible pattern for all sections -->
            <section id="data-security" class="mb-12 collapsible-section">
                <h2 class="section-header cursor-pointer bg-gray-100 px-4 py-3 rounded-lg flex justify-between items-center">
                    <span class="text-2xl font-bold text-gray-900">4. Data Security</span>
                    <i class="fas fa-chevron-down text-gray-600"></i>
                </h2>
                <div class="section-content mt-4 hidden">
                    <ul class="list-disc pl-6 space-y-2 text-gray-600">
                        <li>Encryption of data in transit & rest</li>
                        <li>Regular penetration testing & audits</li>
                        <li>Intrusion detection & monitoring</li>
                        <li>Disaster recovery & backups</li>
                    </ul>
                </div>
            </section>

            <!-- Contact -->
            <section id="contact-privacy" class="mb-12 collapsible-section">
                <h2 class="section-header cursor-pointer bg-gray-100 px-4 py-3 rounded-lg flex justify-between items-center">
                    <span class="text-2xl font-bold text-gray-900">9. Contact Us</span>
                    <i class="fas fa-chevron-down text-gray-600"></i>
                </h2>
                <div class="section-content mt-4 hidden">
                    <p class="text-gray-700">📧 Email: <a href="mailto:privacy@tradevision.com" class="text-primary-600 hover:underline">privacy@tradevision.com</a></p>
                    <p class="text-gray-700">📞 Phone: +254 700 000 000</p>
                </div>
            </section>

        </div>
    </div>
</section>

<!-- Back to Top Button -->
<button id="backToTop" 
    class="hidden fixed bottom-6 right-6 bg-primary-600 text-white p-3 rounded-full shadow-lg hover:bg-primary-700 transition">
    ⬆
</button>
{% endblock %}

{% block extra_js %}
<script>
// Smooth scroll
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', e => {
        e.preventDefault();
        const target = document.querySelector(anchor.getAttribute('href'));
        if (target) target.scrollIntoView({ behavior: 'smooth' });
    });
});

// TOC Highlight
window.addEventListener('scroll', () => {
    const sections = document.querySelectorAll('section[id]');
    let current = '';
    sections.forEach(section => {
        if (pageYOffset >= section.offsetTop - 200) current = section.id;
    });
    document.querySelectorAll('a[href^="#"]').forEach(link => {
        link.classList.remove('font-bold', 'text-primary-700');
        if (link.getAttribute('href') === '#' + current) {
            link.classList.add('font-bold', 'text-primary-700');
        }
    });
});

// Collapsible sections
document.querySelectorAll('.collapsible-section .section-header').forEach(header => {
    header.addEventListener('click', () => {
        const content = header.nextElementSibling;
        const icon = header.querySelector('i');
        content.classList.toggle('hidden');
        icon.classList.toggle('fa-chevron-down');
        icon.classList.toggle('fa-chevron-up');
    });
});

// Search filter
document.getElementById('policySearch').addEventListener('keyup', function() {
    const query = this.value.toLowerCase();
    document.querySelectorAll('.collapsible-section').forEach(section => {
        section.style.display = section.innerText.toLowerCase().includes(query) ? '' : 'none';
    });
});

// Back to top
const backToTop = document.getElementById('backToTop');
window.addEventListener('scroll', () => {
    if (window.scrollY > 400) backToTop.classList.remove('hidden');
    else backToTop.classList.add('hidden');
});
backToTop.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
</script>
{% endblock %}
